function transitionEnd(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var o in e)if(void 0!==t.style[o])return{end:e[o]};return!1}!function(t){t.fn.smartZoom=function(e){function o(t){}function n(t,e){var o=M.data("smartZoomData");o.currentWheelDelta*e<0&&(o.currentWheelDelta=0),o.currentWheelDelta+=e,z.zoom(o.mouseWheelDeltaFactor*o.currentWheelDelta,{x:t.pageX,y:t.pageY})}function a(t){t.preventDefault()}function i(){var t=M.data("smartZoomData");if(1==t.settings.mouseMoveEnabled&&1==t.settings.moveCursorEnabled){var e=x(),o=e.width/t.originalSize.width;parseInt(100*o)>=parseInt(100*t.adjustedPosInfos.scale)?M.css({cursor:"move"}):M.css({cursor:"default"})}}function r(t){f(t.pageX,t.pageY)}function s(e){e.preventDefault(),t(document).on("mousemove.smartZoom",u),t(document).on("mouseup.smartZoom",l);var o=M.data("smartZoomData");o.moveCurrentPosition=new A(e.pageX,e.pageY),o.moveLastPosition=new A(e.pageX,e.pageY)}function u(t){var e=M.data("smartZoomData");(e.mouseMoveForPan||!e.mouseMoveForPan&&e.moveCurrentPosition.x!=t.pageX&&e.moveCurrentPosition.y!=t.pageY)&&(e.mouseMoveForPan=!0,d(t.pageX,t.pageY,0,!1))}function l(e){var o=M.data("smartZoomData");if(o.mouseMoveForPan)if(o.mouseMoveForPan=!1,o.moveLastPosition.distance(o.moveCurrentPosition)>4){var n=o.moveLastPosition.interpolate(o.moveCurrentPosition,-4);d(n.x,n.y,500,!0)}else d(o.moveLastPosition.x,o.moveLastPosition.y,0,!0);else o.settings.zoomOnSimpleClick&&f(e.pageX,e.pageY);t(document).off("mousemove.smartZoom"),t(document).off("mouseup.smartZoom")}function c(e){e.preventDefault(),t(document).off("touchmove.smartZoom"),t(document).off("touchend.smartZoom"),t(document).off("gesturestart.smartZoom"),t(document).on("touchmove.smartZoom",m),t(document).on("touchend.smartZoom",h);var o=e.originalEvent.touches,n=o[0],a=M.data("smartZoomData");a.touch.touchMove=!1,a.touch.touchPinch=!1,a.moveCurrentPosition=new A(n.pageX,n.pageY),a.moveLastPosition=new A(n.pageX,n.pageY),a.touch.lastTouchPositionArr=new Array;for(var i,r=o.length,s=0;r>s;++s)i=o[s],a.touch.lastTouchPositionArr.push(new A(i.pageX,i.pageY))}function m(t){t.preventDefault();var e=M.data("smartZoomData"),o=t.originalEvent.touches,n=o.length,a=o[0];if(1!=n||e.touch.touchPinch||1!=e.settings.touchMoveEnabled){if(2==n&&!e.touch.touchMove&&1==e.settings.pinchEnabled){e.touch.touchPinch=!0;var i=o[1],r=e.touch.lastTouchPositionArr[0],s=e.touch.lastTouchPositionArr[1],u=new A(a.pageX,a.pageY),l=new A(i.pageX,i.pageY),c=u.distance(l),m=r.distance(s),h=c-m;if(Math.abs(h)<3)return;var f=new A((u.x+l.x)/2,(u.y+l.y)/2),p=x(),v=e.originalSize,g=p.width/v.width,w=c/m,b=p.width*w/v.width;z.zoom(b-g,f,0),e.touch.lastTouchPositionArr[0]=u,e.touch.lastTouchPositionArr[1]=l}}else{if(!e.touch.touchMove){var D=e.touch.lastTouchPositionArr[0];if(D.distance(new A(a.pageX,a.pageY))<3)return;e.touch.touchMove=!0}d(a.pageX,a.pageY,0,!1)}}function h(e){e.preventDefault();var o=e.originalEvent.touches.length;0==o&&(t(document).off("touchmove.smartZoom"),t(document).off("touchend.smartZoom"));var n=M.data("smartZoomData");if(!n.touch.touchPinch)if(n.touch.touchMove){if(n.moveLastPosition.distance(n.moveCurrentPosition)>2){var a=n.moveLastPosition.interpolate(n.moveCurrentPosition,-4);d(a.x,a.y,500,!0)}}else{if(1==n.settings.dblTapEnabled&&0!=n.touch.lastTouchEndTime&&(new Date).getTime()-n.touch.lastTouchEndTime<400){var i=n.touch.lastTouchPositionArr[0];f(i.x,i.y)}n.touch.lastTouchEndTime=(new Date).getTime()}}function d(t,e,n,a){p(o.PAN);var i=M.data("smartZoomData");i.moveLastPosition.x=i.moveCurrentPosition.x,i.moveLastPosition.y=i.moveCurrentPosition.y;var r=M.offset(),s=x(),u=r.left+(t-i.moveCurrentPosition.x),l=r.top+(e-i.moveCurrentPosition.y),c=g(u,l,s.width,s.height);y(o.PAN,o.START,!1),D(M,c.x,c.y,s.width,s.height,n,1==a?function(){y(o.PAN,o.END,!1)}:null),i.moveCurrentPosition.x=t,i.moveCurrentPosition.y=e}function f(t,e){var o,n=M.data("smartZoomData"),a=n.originalSize,i=x(),r=i.width/a.width,s=n.adjustedPosInfos.scale,u=parseFloat(n.settings.dblClickMaxScale);o=r.toFixed(2)>u.toFixed(2)||Math.abs(u-r)>Math.abs(r-s)?u-r:s-r,z.zoom(o,{x:t,y:e})}function p(e){var o=M.data("smartZoomData");if(o.transitionObject){o.transitionObject.cssAnimHandler&&M.off(t.support.transition,o.transitionObject.cssAnimTimer);var n=o.originalSize,a=x(),r=new Object;o.transitionObject.css3dSupported?r[o.transitionObject.transform]="translate3d("+a.x+"px, "+a.y+"px, 0) scale3d("+a.width/n.width+","+a.height/n.height+", 1)":r[o.transitionObject.transform]="translateX("+a.x+"px) translateY("+a.y+"px) scale("+a.width/n.width+","+a.height/n.height+")",M.css(r)}else M.stop();i(),null!=e&&y(e,"",!0)}function v(t){var e=M.data("smartZoomData");return t>e.settings.maxScale?void console.warn("[jquery-zoom] Scale is to height"):0>t?void console.warn("[jquery-zoom] Scale is lower than 0"):t}function g(t,e,o,n){var a=M.data("smartZoomData");if(a.settings.Border){var i=Math.min(a.adjustedPosInfos.top,e);i+=Math.max(0,a.adjustedPosInfos.top+a.adjustedPosInfos.height-(i+n));var r=Math.min(a.adjustedPosInfos.left,t);r+=Math.max(0,a.adjustedPosInfos.left+a.adjustedPosInfos.width-(r+o))}else{var i=e;i+=Math.max(0,0-(i+n));var r=t;r+=Math.max(0,0-(r+o))}return new A(r.toFixed(2),i.toFixed(2))}function w(t){M.off("load.smartZoom"),z.init.apply(M,[t.data.arguments])}function b(){var t=M.data("smartZoomData"),e=t.containerDiv,o=t.originalSize,n=e.parent().offset(),a=E(t.settings.left,n.left,e.parent().width()),r=E(t.settings.top,n.top,e.parent().height());e.offset({left:a,top:r}),e.width(T(t.settings.width,e.parent().width(),a-n.left)),e.height(T(t.settings.height,e.parent().height(),r-n.top));var s=S(e),u=Math.min(Math.min(s.width/o.width,s.height/o.height),1).toFixed(2),l=o.width*u,c=o.height*u;t.adjustedPosInfos={left:(s.width-l)/2+n.left,top:(s.height-c)/2+n.top,width:l,height:c,scale:u},p(),D(M,t.adjustedPosInfos.left,t.adjustedPosInfos.top,l,c,0,function(){M.css("visibility","visible")}),i()}function D(e,o,n,a,i,r,s){var u=M.data("smartZoomData"),l=u.containerDiv.offset(),c=o-l.left,m=n-l.top;if(null!=u.transitionObject){var h=u.originalSize,d=new Object;d[u.transitionObject.transform+"-origin"]="0 0",d[u.transitionObject.touch]="none",d[u.transitionObject.transition]="all "+r/1e3+"s ease-out",u.transitionObject.css3dSupported?d[u.transitionObject.transform]="translate3d("+c+"px, "+m+"px, 0) scale3d("+a/h.width+","+i/h.height+", 1)":d[u.transitionObject.transform]="translateX("+c+"px) translateY("+m+"px) scale("+a/h.width+","+i/h.height+")",null!=s&&(u.transitionObject.cssAnimHandler=s,e.one(t.support.transition.end,u.transitionObject.cssAnimHandler)),e.css(d)}else e.animate({"margin-left":c,"margin-top":m,width:a,height:i},{duration:r,easing:u.settings.easing,complete:function(){null!=s&&s()}})}function P(e,o,n,a,i,r,s,u){var l=M.data("smartZoomData");l.containerDiv.offset();if(null!=l.transitionObject){var c=(l.originalSize,new Object);c[l.transitionObject.transform+"-origin"]="0 0",c[l.transitionObject.touch]="none",c[l.transitionObject.transition]="all "+s/1e3+"s ease-out",l.transitionObject.css3dSupported?c[l.transitionObject.transform]="translate3d("+o+"px, "+n+"px, 0) scale3d("+a+","+a+", 1)":c[l.transitionObject.transform]="translateX("+o+"px) translateY("+n+"px) scale("+a+","+a+")",null!=u&&(l.transitionObject.cssAnimHandler=u,e.one(t.support.transition.end,l.transitionObject.cssAnimHandler)),e.css(c)}else e.animate({"margin-left":o,"margin-top":n,width:i,height:r},{duration:s,easing:l.settings.easing,complete:function(){null!=u&&u()}})}function x(t){var e=M.data("smartZoomData"),o=M.width(),n=M.height(),a=M.offset(),i=parseInt(a.left),r=parseInt(a.top),s=e.containerDiv.offset();if(1!=t&&(i=parseInt(i)-s.left,r=parseInt(r)-s.top),null!=e.transitionObject){var u=M.css(e.transitionObject.transform);if(u&&""!=u&&-1!=u.search("matrix")){var l,c;-1!=u.search("matrix3d")?(c=u.replace("matrix3d(","").replace(")","").split(","),l=c[0]):(c=u.replace("matrix(","").replace(")","").split(","),l=c[3],i=parseFloat(c[4]),r=parseFloat(c[5]),t&&(i=parseFloat(i)+s.left,r=parseFloat(r)+s.top)),o=l*o,n=l*n}}return{x:i,y:r,width:o,height:n}}function y(t,e,n){var a=M.data("smartZoomData"),i="";if(1==n&&a.currentActionType!=t?(i=a.currentActionType+"_"+o.END,a.currentActionType="",a.currentActionStep=""):a.currentActionType!=t||a.currentActionStep==o.END?(a.currentActionType=t,a.currentActionStep=o.START,i=a.currentActionType+"_"+a.currentActionStep):a.currentActionType==t&&e==o.END&&(a.currentActionStep=o.END,i=a.currentActionType+"_"+a.currentActionStep,a.currentActionType="",a.currentActionStep=""),""!=i){var r=jQuery.Event(i);r.targetRect=x(!0),r.scale=r.targetRect.width/a.originalSize.width,M.trigger(r)}}function Z(){for(var e,o=document.body||document.documentElement,n=o.style,a=["transition","WebkitTransition","MozTransition","MsTransition","OTransition"],i=["transition","-webkit-transition","-moz-transition","-ms-transition","-o-transition"],r=["transform","-webkit-transform","-moz-transform","-ms-transform","-o-transform"],s=["touch-action"],u=a.length,l=0;u>l;l++)if(null!=n[a[l]]){transformStr=r[l];var c=t('<div style="position:absolute;">Translate3d Test</div>');if(t("body").append(c),e=new Object,e[r[l]]="translate3d(20px,0,0)",c.css(e),css3dSupported=c.offset().left-t("body").offset().left==20,c.empty().remove(),css3dSupported)return{transition:i[l],transform:r[l],css3dSupported:css3dSupported,touch:s}}return null}function T(t,e,o){return t.search&&-1!=t.search("%")?(e-o)*(parseInt(t)/100):parseInt(t)}function E(t,e,o){return t.search&&-1!=t.search("%")?e+o*(parseInt(t)/100):e+parseInt(t)}function O(t){function e(){new Date-o<i?setTimeout(e,i):(a=!1,b(),n.originalSize={width:M.width(),height:M.height()},n.originalPosition=M.offset())}var o,n=M.data("smartZoomData"),a=!1,i=200;o=new Date,a===!1&&(a=!0,setTimeout(e,i))}function S(t){var e=t.offset();if(!e)return null;var o=e.left,n=e.top;return{x:o,y:n,width:t.outerWidth(),height:t.outerHeight()}}function A(t,e){this.x=t,this.y=e,this.toString=function(){return"(x="+this.x+", y="+this.y+")"},this.interpolate=function(t,e){var o=e*this.x+(1-e)*t.x,n=e*this.y+(1-e)*t.y;return new A(o,n)},this.distance=function(t){return Math.sqrt(Math.pow(t.y-this.y,2)+Math.pow(t.x-this.x,2))}}function j(t){"+"===t&&z.zoom(.5,!1,null),"-"===t&&z.zoom(-.5,!1,null)}var M=this;o.ZOOM="SmartZoom_ZOOM",o.PAN="SmartZoom_PAN",o.START="START",o.END="END",o.DESTROYED="SmartZoom_DESTROYED";var z={init:function(e){if(!M.data("smartZoomData")){var o=t.extend({top:"0",left:"0",width:"100%",height:"100%",easing:"smartZoomEasing",initCallback:null,maxScale:3,dblClickMaxScale:1.8,mouseEnabled:!0,scrollEnabled:!0,dblClickEnabled:!0,mouseMoveEnabled:!0,moveCursorEnabled:!0,adjustOnResize:!0,touchEnabled:!0,dblTapEnabled:!0,zoomOnSimpleClick:!1,pinchEnabled:!0,touchMoveEnabled:!0,Border:!0,containerBackground:"#FFFFFF",containerClass:"",zoomInElement:null,zoomOutElement:null,resetElement:null},e),i=M.attr("style"),u="smartZoomContainer"+(new Date).getTime(),l=t('<div id="'+u+'" class="'+o.containerClass+'"></div>');M.before(l),l=t("#"+u),l.css({overflow:"hidden"}),""==o.containerClass&&l.css({"background-color":o.containerBackground}),l.append(M);var m=new Object;m.lastTouchEndTime=0,m.lastTouchPositionArr=null,m.touchMove=!1,m.touchPinch=!1,M.data("smartZoomData",{settings:o,containerDiv:l,originalSize:{width:M.width(),height:M.height()},originalPosition:M.offset(),transitionObject:Z(),touch:m,mouseWheelDeltaFactor:.015,currentWheelDelta:0,adjustedPosInfos:null,moveCurrentPosition:null,moveLastPosition:null,mouseMoveForPan:!1,currentActionType:"",initialStyles:i,currentActionStep:""}),b(),1==o.touchEnabled&&M.on("touchstart.smartZoom",c),1==o.mouseEnabled&&(1==o.mouseMoveEnabled&&M.on("mousedown.smartZoom",s),1==o.scrollEnabled&&(l.on("mousewheel.smartZoom",n),l.on("mousewheel.smartZoom DOMMouseScroll.smartZoom",a)),1==o.dblClickEnabled&&0==o.zoomOnSimpleClick&&l.on("dblclick.smartZoom",r)),null!=o.zoomInElement&&o.zoomInElement.on("click",function(t){t.preventDefault(),j("+")}),null!=o.zoomOutElement&&o.zoomOutElement.on("click",function(t){t.preventDefault(),j("-")}),null!=o.resetElement&&o.resetElement.on("click",function(t){t.preventDefault(),b()}),document.ondragstart=function(){return!1},1==o.adjustOnResize&&t(window).on("resize.smartZoom",O),null!=o.initCallback&&o.initCallback.apply(this,M)}},zoom:function(t,e,n){var a,r,s=M.data("smartZoomData");if(e)a=e.x,r=e.y;else{var u=S(s.containerDiv);a=u.x+u.width/2,r=u.y+u.height/2}p(o.ZOOM);var l=x(!0),c=s.originalSize,m=l.width/c.width+t;m=Math.max(s.adjustedPosInfos.scale,m),m=Math.min(s.settings.maxScale,m);var h=c.width*m,d=c.height*m,f=a-l.x,v=r-l.y,w=h/l.width,b=l.x-(f*w-f),P=l.y-(v*w-v),Z=g(b,P,h,d);null==n&&(n=700),y(o.ZOOM,o.START,!1),D(M,Z.x,Z.y,h,d,n,function(){s.currentWheelDelta=0,i(),y(o.ZOOM,o.END,!1)})},pan:function(t,e,n){if(null!=t&&null!=e){null==n&&(n=700);var a=M.offset(),i=x(),r=g(a.left+t,a.top+e,i.width,i.height);(r.x!=a.left||r.y!=a.top)&&(p(o.PAN),y(o.PAN,o.START,!1),D(M,r.x,r.y,i.width,i.height,n,function(){y(o.PAN,o.END,!1)}))}},moveToAndScale:function(t,e,n){if(null==t||null==e)return void console.warn("[JQuery-Zoom] Coods are null");var a=700;t=-1*t,e=-1*e;var i=x(),r=g(t,e,i.width,i.height),s=v(n);p(o.PAN),y(o.PAN,o.START,!1),P(M,r.x,r.y,s,i.width,i.height,a,function(){y(o.PAN,o.END,!1)})},reset:function(){b()},destroy:function(){var e=M.data("smartZoomData");if(e){p();var n=e.containerDiv;M.off("mousedown.smartZoom"),M.off("touchstart.smartZoom"),n.off("mousewheel.smartZoom"),n.off("dblclick.smartZoom"),n.off("mousewheel.smartZoom DOMMouseScroll.smartZoom"),t(window).off("resize.smartZoom"),t(document).off("mousemove.smartZoom"),t(document).off("mouseup.smartZoom"),t(document).off("touchmove.smartZoom"),t(document).off("touchend.smartZoom"),M.css({cursor:"default"}),n.before(M),D(M,e.originalPosition.left,e.originalPosition.top,e.originalSize.width,e.originalSize.height,5),M.removeData("smartZoomData"),n.remove(),M.attr("style",e.initialStyles),M.trigger(o.DESTROYED)}},isPluginActive:function(){return void 0!=M.data("smartZoomData")}};return z[e]?z[e].apply(this,Array.prototype.slice.call(arguments,1)):void("object"!=typeof e&&e?t.error("Method "+e+" does not exist on e-smartzoom jquery plugin"):"img"!=M[0].tagName.toLowerCase()||M[0].complete?z.init.apply(M,[arguments[0]]):M.on("load.smartZoom",{arguments:arguments[0]},w))}}(jQuery),function(t){t.extend(t.easing,{smartZoomEasing:function(e,o,n,a,i){return t.easing.smartZoomOutQuad(e,o,n,a,i)},smartZoomOutQuad:function(t,e,o,n,a){return-n*(e/=a)*(e-2)+o}})}(jQuery),function(t){function e(e){var o=e||window.event,n=[].slice.call(arguments,1),a=0,i=0,r=0;return e=t.event.fix(o),e.type="mousewheel",o.wheelDelta&&(a=o.wheelDelta/120),o.detail&&(a=-o.detail/3),r=a,void 0!==o.axis&&o.axis===o.HORIZONTAL_AXIS&&(r=0,i=-1*a),void 0!==o.wheelDeltaY&&(r=o.wheelDeltaY/120),void 0!==o.wheelDeltaX&&(i=-1*o.wheelDeltaX/120),n.unshift(e,a,i,r),(t.event.dispatch||t.event.handle).apply(this,n)}var o=["DOMMouseScroll","mousewheel"];if(t.event.fixHooks)for(var n=o.length;n;)t.event.fixHooks[o[--n]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=o.length;t;)this.addEventListener(o[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=o.length;t;)this.removeEventListener(o[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.on("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.off("mousewheel",t)}})}(jQuery),$.fn.emulateTransitionEnd=function(t){var e=!1,o=this;$(this).one($.support.transition.end,function(){e=!0});var n=function(){e||$(o).trigger($.support.transition.end)};return setTimeout(n,t),this},$(function(){$.support.transition=transitionEnd()});